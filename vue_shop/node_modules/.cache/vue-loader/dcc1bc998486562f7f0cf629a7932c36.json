{"remainingRequest":"C:\\Users\\zhoutao\\Desktop\\houtai\\vue_shop\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\zhoutao\\Desktop\\houtai\\vue_shop\\src\\components\\user\\Users.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\zhoutao\\Desktop\\houtai\\vue_shop\\src\\components\\user\\Users.vue","mtime":1643304609200},{"path":"C:\\Users\\zhoutao\\Desktop\\houtai\\vue_shop\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1642648944000},{"path":"C:\\Users\\zhoutao\\Desktop\\houtai\\vue_shop\\node_modules\\babel-loader\\lib\\index.js","mtime":1642648952000},{"path":"C:\\Users\\zhoutao\\Desktop\\houtai\\vue_shop\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1642648944000},{"path":"C:\\Users\\zhoutao\\Desktop\\houtai\\vue_shop\\node_modules\\vue-loader\\lib\\index.js","mtime":1642648952000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQpleHBvcnQgZGVmYXVsdCB7DQogIGRhdGEoKSB7DQogICAgLy8g5qCh6aqM6YKu566x55qE6KeE5YiZDQogICAgdmFyIGNoZWNrRW1haWwgPSAocnVsZSwgdmFsdWUsIGNiKSA9PiB7DQogICAgICAvLyDpqozor4Hpgq7nrrHnmoTmraPliJnooajovr7lvI8NCiAgICAgIGNvbnN0IHJlZ0VtYWlsID0gL14oW2EtekEtWjAtOV8tXSkrQChbYS16QS1aMC05Xy1dKSsoXC5bYS16QS1aMC05Xy1dKSsvOw0KICAgICAgLy8g5aaC5p6c6aqM6K+B6YKu566x5q2j56Gu77yM6L+U5Zue5Zue6LCD5Ye95pWw77yM6L6T5YWl5qGG5pi+56S657u/6ImyDQogICAgICBpZiAocmVnRW1haWwudGVzdCh2YWx1ZSkpIHsNCiAgICAgICAgLy8g5ZCI5rOV55qE6YKu566xDQogICAgICAgIHJldHVybiBjYigpOw0KICAgICAgfQ0KICAgICAgLy8g5aaC5p6c6aqM6K+B5LiN5q2j56GuDQogICAgICBjYihuZXcgRXJyb3IoIuivt+i+k+WFpeWQiOazleeahOmCrueusSIpKTsNCiAgICB9Ow0KICAgIC8vIOagoemqjOaJi+acuuWPt+eahOinhOWImQ0KICAgIHZhciBjaGVja01vYmlsZSA9IChydWxlLCB2YWx1ZSwgY2IpID0+IHsNCiAgICAgIC8vIOmqjOivgeaJi+acuuWPt+eahOato+WImeihqOi+vuW8jw0KICAgICAgY29uc3QgcmVnTW9iaWxlID0NCiAgICAgICAgL14oKCgxM1swLTldezF9KXwoMTRbMC05XXsxfSl8KDE1WzAtOV17MX0pfCgxNlswLTldezF9KXwoMTdbMC05XXsxfSl8KDE5WzAtOV17MX0pfCgxOFswLTldezF9KSkrXGR7OH0pJC87DQogICAgICAvLyDlpoLmnpzpqozor4HmiYvmnLrlj7fmraPnoa7vvIzov5Tlm57lm57osIPlh73mlbDvvIzovpPlhaXmoYbmmL7npLrnu7/oibINCiAgICAgIGlmIChyZWdNb2JpbGUudGVzdCh2YWx1ZSkpIHsNCiAgICAgICAgcmV0dXJuIGNiKCk7DQogICAgICB9DQogICAgICAvLyDlpoLmnpzpqozor4HkuI3mraPnoa4NCiAgICAgIGNiKG5ldyBFcnJvcigi6K+36L6T5YWl5ZCI5rOV55qE5omL5py65Y+3IikpOw0KICAgIH07DQogICAgcmV0dXJuIHsNCiAgICAgIC8v6I635Y+W55So5oi35YiX6KGo55qE5Y+C5pWwDQogICAgICBxdWVyeUluZm86IHsNCiAgICAgICAgcXVlcnk6ICIiLA0KICAgICAgICAvL+W9k+WJjemhteaVsA0KICAgICAgICBwYWdlbnVtOiAxLA0KICAgICAgICAvL+avj+mhteaYvuekuuWkmuWwkeadoQ0KICAgICAgICBwYWdlc2l6ZTogMiwNCiAgICAgICAgLy/mkJzntKLovpPlhaXmoYbph4zpnaLnmoTlgLwNCiAgICAgIH0sDQogICAgICAvL+S/neWtmOeUqOaIt+WIl+ihqA0KICAgICAgdXNlcmxpc3Q6IFtdLA0KICAgICAgLy/kv53lrZjmgLvmlbDmja7mnaHmlbANCiAgICAgIHRvdGFsOiAwLA0KICAgICAgLy/mjqfliLbmt7vliqDnlKjmiLflr7nor53moYbmmL7npLrpmpDol48NCiAgICAgIGFkZERpYWxvZ1Zpc2libGU6IGZhbHNlLA0KICAgICAgLy/mjqfliLbkv67mlLnnlKjmiLflr7nor53moYbmmL7npLrpmpDol48NCiAgICAgIGVkaXREaWFsb2dWaXNpYmxlOiBmYWxzZSwNCiAgICAgIC8vIOWIhumFjeeUqOaIt+eahOinkuiJsuWvueivneahhuaYvuekuumakOiXjw0KICAgICAgc2V0Um9sZURpYWxvZ1Zpc2libGU6IGZhbHNlLA0KICAgICAgLy/mt7vliqDnlKjmiLfooajljZXmlbDmja4NCiAgICAgIGFkZEZvcm06IHsNCiAgICAgICAgdXNlcm5hbWU6ICIiLA0KICAgICAgICBwYXNzd29yZDogIiIsDQogICAgICAgIGVtYWlsOiAiIiwNCiAgICAgICAgbW9iaWxlOiAiIiwNCiAgICAgIH0sDQogICAgICAvL+afpeivoueUqOaIt+ihqOWNleS/oeaBr+WvueixoQ0KICAgICAgZWRpdEZvcm06IHsNCiAgICAgICAgLy8gdXNlcm5hbWU6JycsDQogICAgICAgIC8vIHBhc3N3b3JkOicnLA0KICAgICAgICAvLyBlbWFpbDonJywNCiAgICAgICAgLy8gbW9iaWxlOicnLA0KICAgICAgfSwNCiAgICAgIC8v5L+u5pS56KGo5Y2V55qE6aqM6K+B6KeE5YiZ5a+56LGhDQogICAgICBlZGl0Rm9ybVJ1bGVzOiB7DQogICAgICAgIHVzZXJuYW1lOiBbDQogICAgICAgICAgLy90cmlnZ2VyOiAiYmx1ciLlpLHljrvnhKbngrkNCiAgICAgICAgICB7IHJlcXVpcmVkOiB0cnVlLCBtZXNzYWdlOiAi6K+36L6T5YWl55So5oi35ZCNIiwgdHJpZ2dlcjogImJsdXIiIH0sDQogICAgICAgICAgew0KICAgICAgICAgICAgbWluOiAzLA0KICAgICAgICAgICAgbWF4OiAxMCwNCiAgICAgICAgICAgIG1lc3NhZ2U6ICLnlKjmiLflkI3nmoTplb/luqblnKgzfjEw5Liq5a2X56ym5LmL6Ze0IiwNCiAgICAgICAgICAgIHRyaWdnZXI6ICJibHVyIiwNCiAgICAgICAgICB9LA0KICAgICAgICBdLA0KICAgICAgICAvL+mqjOivgeWvhueggeaYr+WQpuWQiOazlQ0KICAgICAgICBwYXNzd29yZDogWw0KICAgICAgICAgIHsgcmVxdWlyZWQ6IHRydWUsIG1lc3NhZ2U6ICLor7fovpPlhaXlr4bnoIEiLCB0cmlnZ2VyOiAiYmx1ciIgfSwNCiAgICAgICAgICB7DQogICAgICAgICAgICBtaW46IDYsDQogICAgICAgICAgICBtYXg6IDE1LA0KICAgICAgICAgICAgbWVzc2FnZTogIumVv+W6puWcqCA2IOWIsCAxNSDkuKrlrZfnrKYiLA0KICAgICAgICAgICAgdHJpZ2dlcjogImJsdXIiLA0KICAgICAgICAgIH0sDQogICAgICAgIF0sDQogICAgICAgIGVtYWlsOiBbDQogICAgICAgICAgeyByZXF1aXJlZDogdHJ1ZSwgbWVzc2FnZTogIuivt+i+k+WFpemCrueusSIsIHRyaWdnZXI6ICJibHVyIiB9LA0KICAgICAgICAgIHsgdmFsaWRhdG9yOiBjaGVja0VtYWlsLCB0cmlnZ2VyOiAiYmx1ciIgfSwNCiAgICAgICAgXSwNCiAgICAgICAgbW9iaWxlOiBbDQogICAgICAgICAgeyByZXF1aXJlZDogdHJ1ZSwgbWVzc2FnZTogIuivt+i+k+WFpeaJi+acuuWPtyIsIHRyaWdnZXI6ICJibHVyIiB9LA0KICAgICAgICAgIHsgdmFsaWRhdG9yOiBjaGVja01vYmlsZSB9LA0KICAgICAgICBdLA0KICAgICAgfSwNCiAgICAgIC8v5re75Yqg55So5oi36KGo5Y2V6aqM6K+B6KeE5YiZDQogICAgICBhZGRGb3JtUnVsZXM6IHsNCiAgICAgICAgdXNlcm5hbWU6IFsNCiAgICAgICAgICAvL3RyaWdnZXI6ICJibHVyIuWkseWOu+eEpueCuQ0KICAgICAgICAgIHsgcmVxdWlyZWQ6IHRydWUsIG1lc3NhZ2U6ICLor7fovpPlhaXnlKjmiLflkI0iLCB0cmlnZ2VyOiAiYmx1ciIgfSwNCiAgICAgICAgICB7DQogICAgICAgICAgICBtaW46IDMsDQogICAgICAgICAgICBtYXg6IDEwLA0KICAgICAgICAgICAgbWVzc2FnZTogIueUqOaIt+WQjeeahOmVv+W6puWcqDN+MTDkuKrlrZfnrKbkuYvpl7QiLA0KICAgICAgICAgICAgdHJpZ2dlcjogImJsdXIiLA0KICAgICAgICAgIH0sDQogICAgICAgIF0sDQogICAgICAgIC8v6aqM6K+B5a+G56CB5piv5ZCm5ZCI5rOVDQogICAgICAgIHBhc3N3b3JkOiBbDQogICAgICAgICAgeyByZXF1aXJlZDogdHJ1ZSwgbWVzc2FnZTogIuivt+i+k+WFpeWvhueggSIsIHRyaWdnZXI6ICJibHVyIiB9LA0KICAgICAgICAgIHsNCiAgICAgICAgICAgIG1pbjogNiwNCiAgICAgICAgICAgIG1heDogMTUsDQogICAgICAgICAgICBtZXNzYWdlOiAi6ZW/5bqm5ZyoIDYg5YiwIDE1IOS4quWtl+espiIsDQogICAgICAgICAgICB0cmlnZ2VyOiAiYmx1ciIsDQogICAgICAgICAgfSwNCiAgICAgICAgXSwNCiAgICAgICAgZW1haWw6IFsNCiAgICAgICAgICB7IHJlcXVpcmVkOiB0cnVlLCBtZXNzYWdlOiAi6K+36L6T5YWl6YKu566xIiwgdHJpZ2dlcjogImJsdXIiIH0sDQogICAgICAgICAgeyB2YWxpZGF0b3I6IGNoZWNrRW1haWwsIHRyaWdnZXI6ICJibHVyIiB9LA0KICAgICAgICBdLA0KICAgICAgICBtb2JpbGU6IFsNCiAgICAgICAgICB7IHJlcXVpcmVkOiB0cnVlLCBtZXNzYWdlOiAi6K+36L6T5YWl5omL5py65Y+3IiwgdHJpZ2dlcjogImJsdXIiIH0sDQogICAgICAgICAgeyB2YWxpZGF0b3I6IGNoZWNrTW9iaWxlIH0sDQogICAgICAgIF0sDQogICAgICB9LA0KICAgICAgLy/pnIDopoHliIbphY3op5LoibLnmoTnlKjmiLfkv6Hmga8NCiAgICAgIHVzZXJJbmZvOiB7fSwNCiAgICAgIC8v5omA5pyJ6KeS6Imy5Lul5ZCO5YiX6KGoDQogICAgICByb2xlbGlzdDogW10sDQogICAgICAvL+eUqOaIt+inkuiJsumAieaLqeeahOaWsOinkuiJsmlk55qE5YC8DQogICAgICBzZWxlY3RlZFJvbGVJZDonJw0KICAgIH07DQogIH0sDQogIGNyZWF0ZWQoKSB7DQogICAgdGhpcy5nZXRVc2VybGlzdCgpOw0KICB9LA0KICBtZXRob2RzOiB7DQogICAgLy8g6I635Y+W55So5oi35YiX6KGoDQogICAgYXN5bmMgZ2V0VXNlcmxpc3QoKSB7DQogICAgICAvL3VzZXJz5o6l5Y+jIHRoaXMucXVlcnlJbmZv5Y+C5pWwIHBhcmFtc+WIq+WQjQ0KICAgICAgY29uc3QgeyBkYXRhOiByZXMgfSA9IGF3YWl0IHRoaXMuJGh0dHAuZ2V0KCJ1c2VycyIsIHsNCiAgICAgICAgcGFyYW1zOiB0aGlzLnF1ZXJ5SW5mbywNCiAgICAgIH0pOw0KICAgICAgaWYgKHJlcy5tZXRhLnN0YXR1cyAhPT0gMjAwKSB7DQogICAgICAgIHJldHVybiB0aGlzLiRtZXNzYWdlLmVycm9yKCLojrflj5bnlKjmiLfliJfooajlpLHotKUiKTsNCiAgICAgIH0NCiAgICAgIC8v5L+d5a2Y55So5oi35YiX6KGoDQogICAgICB0aGlzLnVzZXJsaXN0ID0gcmVzLmRhdGEudXNlcnM7DQogICAgICAvL+S/neWtmOaAu+aVsOaNruadoeaVsA0KICAgICAgdGhpcy50b3RhbCA9IHJlcy5kYXRhLnRvdGFsOw0KICAgICAgY29uc29sZS5sb2codGhpcy50b3RhbCk7DQogICAgfSwNCiAgICAvL+ebkeWQrHBhZ2VzaXpl5pS55Y+Y55qE5LqL5Lu2DQogICAgaGFuZGxlU2l6ZUNoYW5nZShuZXdTaXplKSB7DQogICAgICAvLyBjb25zb2xlLmxvZygxMTExMSxuZXdTaXplKTsNCiAgICAgIHRoaXMucXVlcnlJbmZvLnBhZ2VzaXplID0gbmV3U2l6ZTsNCiAgICAgIHRoaXMuZ2V0VXNlcmxpc3QoKTsNCiAgICB9LA0KICAgIC8v55uR5ZCs6aG156CB5YC85pS55Y+Y55qE5LqL5Lu2DQogICAgaGFuZGxlQ3VycmVudENoYW5nZShuZXdQYWdlKSB7DQogICAgICAvLyAgY29uc29sZS5sb2cobmV3UGFnZSk7DQogICAgICB0aGlzLnF1ZXJ5SW5mby5wYWdlbnVtID0gbmV3UGFnZTsNCiAgICAgIHRoaXMuZ2V0VXNlcmxpc3QoKTsNCiAgICB9LA0KICAgIC8v55uR5ZCsc3dpdGNo5byA5YWz54q25oCB55qE5pS55Y+YDQogICAgYXN5bmMgdXNlclN0YXRlQ2hhbmdlZCh1c2VyaW5mbykgew0KICAgICAgY29uc29sZS5sb2codXNlcmluZm8pOw0KICAgICAgY29uc3QgeyBkYXRhOiByZXMgfSA9IGF3YWl0IHRoaXMuJGh0dHAucHV0KA0KICAgICAgICBgdXNlcnMvJHt1c2VyaW5mby5pZH0vc3RhdGUvJHt1c2VyaW5mby5tZ19zdGF0ZX1gDQogICAgICApOw0KICAgICAgLy/liKTmlq3nirbmgIHnoIHlk43lupTmiJDlip/msqHmnIkNCiAgICAgIGlmIChyZXMubWV0YS5zdGF0dXMgIT09IDIwMCkgew0KICAgICAgICAvL+aKiueKtuaAgeWPmOaIkOWOn+agtyzlubbmj5DnpLrmm7TmlrDnlKjmiLfnirbmgIHlpLHotKUNCiAgICAgICAgdXNlcmluZm8ubWdfc3RhdGUgPSAhdXNlcmluZm8ubWdfc3RhdGU7DQogICAgICAgIHJldHVybiB0aGlzLiRtZXNzYWdlLmVycm9yKCLmm7TmlrDnlKjmiLfnirbmgIHlpLHotKUiKTsNCiAgICAgIH0NCiAgICAgIC8v5o+Q56S65oiQ5YqfDQogICAgICB0aGlzLiRtZXNzYWdlLnN1Y2Nlc3MoIuabtOaWsOeUqOaIt+eKtuaAgeaIkOWKnyIpOw0KICAgIH0sDQogICAgLy/mt7vliqDnlKjmiLflr7nor53moYblhbPpl63kuovku7YNCiAgICBhZGREaWFsb2dDbG9zZWQoKSB7DQogICAgICAvL3Jlc2V0RmllbGRz5a+55pW05Liq6KGo5Y2V6L+b6KGM6YeN572u77yM5bCG5omA5pyJ5a2X5q615YC86YeN572u5Li65Yid5aeL5YC85bm256e76Zmk5qCh6aqM57uT5p6cDQogICAgICB0aGlzLiRyZWZzLmFkZEZvcm1SZWYucmVzZXRGaWVsZHMoKTsNCiAgICB9LA0KICAgIC8vIOeCueWHu+aMiemSrua3u+WKoOaWsOeUqOaItw0KICAgIGFkZFVzZXIoKSB7DQogICAgICB0aGlzLiRyZWZzLmFkZEZvcm1SZWYudmFsaWRhdGUoYXN5bmMgKHZhbGlkKSA9PiB7DQogICAgICAgIGlmICghdmFsaWQpIHJldHVybjsNCiAgICAgICAgY29uc3QgeyBkYXRhOiByZXMgfSA9IGF3YWl0IHRoaXMuJGh0dHAucG9zdCgidXNlcnMiLCB0aGlzLmFkZEZvcm0pOw0KICAgICAgICBpZiAocmVzLmRhdGEuc3RhdHVzICE9PSAyMDEpIHsNCiAgICAgICAgICB0aGlzLiRtZXNzYWdlLmVycm9yKCLmt7vliqDnlKjmiLflpLHotKUiKTsNCiAgICAgICAgfQ0KICAgICAgICB0aGlzLiRtZXNzYWdlLnN1Y2Nlc3MoIua3u+WKoOeUqOaIt+aIkOWKnyIpOw0KICAgICAgICAvL+WvueivneahhumakOiXjw0KICAgICAgICB0aGlzLmFkZERpYWxvZ1Zpc2libGUgPSBmYWxzZTsNCiAgICAgICAgLy/ph43mlrDojrflj5bnlKjmiLfliJfooagNCiAgICAgICAgdGhpcy5nZXRVc2VybGlzdCgpOw0KICAgICAgICAvL+aJgOacieinkuiJsueahOaVsOaNruWIl+ihqA0KICAgICAgfSk7DQogICAgfSwNCiAgICAvLyDlsZXnpLrnvJbovpHnlKjmiLfnmoTlr7nor53moYYNCiAgICBhc3luYyBzaG93RWRpdERpYWxvZyhpZCkgew0KICAgICAgdGhpcy5lZGl0RGlhbG9nVmlzaWJsZSA9IHRydWU7DQogICAgICAvLyDmoLnmja4gSUQg5p+l6K+i55So5oi35L+h5oGvDQogICAgICBjb25zdCB7IGRhdGE6IHJlcyB9ID0gYXdhaXQgdGhpcy4kaHR0cC5nZXQoInVzZXJzLyIgKyBpZCk7DQogICAgICAvL+eUqGlm6L+b6KGM5Yik5patIOeUqOaIt+ivt+axguaIkOWKn+i/mOaYr+Wksei0pQ0KICAgICAgaWYgKHJlcy5tZXRhLnN0YXR1cyAhPSAyMDApIHsNCiAgICAgICAgLy/lpLHotKXmj5DnpLoNCiAgICAgICAgcmV0dXJuIHRoaXMuJG1lc3NhZ2UuZXJyb3IoIuafpeivoueUqOaIt+Wksei0pSIpOw0KICAgICAgfQ0KICAgICAgdGhpcy5lZGl0Rm9ybSA9IHJlcy5kYXRhOw0KICAgIH0sDQogICAgLy/kv67mlLnnlKjmiLflr7nor53moYbnmoTlhbPpl63kuovku7YNCiAgICBlZGl0RGlhbG9nQ2xvc2VkKCkgew0KICAgICAgLy8gcmVzZXRGaWVsZHMJ5a+55pW05Liq6KGo5Y2V6L+b6KGM6YeN572u77yM5bCG5omA5pyJ5a2X5q615YC86YeN572u5Li65Yid5aeL5YC85bm256e76Zmk5qCh6aqM57uT5p6cDQogICAgICB0aGlzLiRyZWZzLmVkaXRGb3JtUmVmLnJlc2V0RmllbGRzKCk7DQogICAgfSwNCiAgICAvL+S/ruaUueeUqOaIt+S/oeaBr+W5tuS4lOaPkOS6pA0KICAgIGVkaXRVc2VyKCkgew0KICAgICAgdGhpcy4kcmVmcy5lZGl0Rm9ybVJlZi52YWxpZGF0ZShhc3luYyAodmFsaWQpID0+IHsNCiAgICAgICAgLy/miZPljbDkuLp0cnVlLOihqOekuuagvOW8j+agoemqjOmqjOivgemAmui/hw0KICAgICAgICBjb25zb2xlLmxvZyh0aGlzLmVkaXRGb3JtKTsNCiAgICAgICAgLy/kuI3pgJrov4fnm7TmjqXnu5PmnZ8NCiAgICAgICAgaWYgKCF2YWxpZCkgcmV0dXJuOw0KICAgICAgICAvL+mAmui/h+WPkei1t+S/ruaUueeUqOaIt+S/oeaBr+eahOivt+axgg0KICAgICAgICBjb25zdCB7IGRhdGE6IHJlcyB9ID0gYXdhaXQgdGhpcy4kaHR0cC5wdXQoDQogICAgICAgICAgInVzZXJzLyIgKyB0aGlzLmVkaXRGb3JtLmlkLA0KICAgICAgICAgIHsNCiAgICAgICAgICAgIGVtYWlsOiB0aGlzLmVkaXRGb3JtLmVtYWlsLA0KICAgICAgICAgICAgbW9iaWxlOiB0aGlzLmVkaXRGb3JtLm1vYmlsZSwNCiAgICAgICAgICB9DQogICAgICAgICk7DQogICAgICAgIC8v5YWI5Yik5pat5ZON5bqU5oiQ5Yqf5rKh5pyJDQogICAgICAgIGlmIChyZXMubWV0YS5zdGF0dXMgIT09IDIwMCkgew0KICAgICAgICAgIHJldHVybiB0aGlzLiRtZXNzYWdlLmVycm9yKCLmm7TmlrDnlKjmiLfkv6Hmga/lpLHotKUiKTsNCiAgICAgICAgfQ0KICAgICAgICAvL+WTjeW6lOaIkOWKn+S5i+WQjg0KICAgICAgICAvL+WFs+mXreWvueivneahhiDliLfmlrDmlbDmja7ooagg5o+Q56S65L+u5pS55oiQ5YqfDQogICAgICAgIHRoaXMuZWRpdERpYWxvZ1Zpc2libGUgPSBmYWxzZTsNCiAgICAgICAgdGhpcy5nZXRVc2VybGlzdCgpOw0KICAgICAgICB0aGlzLiRtZXNzYWdlLnN1Y2Nlc3MoIuabtOaWsOeUqOaIt+S/oeaBr+aIkOWKnyIpOw0KICAgICAgfSk7DQogICAgfSwNCiAgICAvL+agueaNrmlk5Yig6Zmk5a+55bqU55qE55So5oi35L+h5oGvDQogICAgYXN5bmMgcmVtb3ZlVXNlckJ5SWQoaWQpIHsNCiAgICAgIGNvbnNvbGUubG9nKGlkKTsNCiAgICAgIC8v5by55qGG5o+Q56S6DQogICAgICBjb25zdCBjb25maXJtUmVzdWx0ID0gYXdhaXQgdGhpcy4kY29uZmlybSgNCiAgICAgICAgIuatpOaTjeS9nOWwhuawuOS5heWIoOmZpOivpeeUqOaItywg5piv5ZCm57un57utPyIsDQogICAgICAgICLmj5DnpLoiLA0KICAgICAgICB7DQogICAgICAgICAgY29uZmlybUJ1dHRvblRleHQ6ICLnoa7lrpoiLA0KICAgICAgICAgIGNhbmNlbEJ1dHRvblRleHQ6ICLlj5bmtogiLA0KICAgICAgICAgIHR5cGU6ICJ3YXJuaW5nIiwNCiAgICAgICAgfQ0KICAgICAgKS5jYXRjaCgoZXJyKSA9PiBlcnIpOw0KICAgICAgLy/lpoLmnpznoa7orqTliKDpmaQg6L+U5ZueY29uZmlybQ0KICAgICAgLy/lj5bmtojliKDpmaQg6L+U5ZueY2FuY2VsDQogICAgICBjb25zb2xlLmxvZyhjb25maXJtUmVzdWx0KTsNCiAgICAgIGlmIChjb25maXJtUmVzdWx0ICE9PSAiY29uZmlybSIpIHsNCiAgICAgICAgcmV0dXJuIHRoaXMuJG1lc3NhZ2UuaW5mbygi5bey57uP5Y+W5raI5Yig6ZmkIik7DQogICAgICB9DQogICAgICBjb25zdCB7IGRhdGE6IHJlcyB9ID0gYXdhaXQgdGhpcy4kaHR0cC5kZWxldGUoInVzZXJzLyIgKyBpZCk7DQogICAgICBpZiAocmVzLm1ldGEuc3RhdHVzICE9IDIwMCkgew0KICAgICAgICAvL+WTjeW6lOmUmeivr+aPkOekug0KICAgICAgICByZXR1cm4gdGhpcy4kbWVzc2FnZS5lcnJvcigi5Yig6Zmk55So5oi35aSx6LSlIik7DQogICAgICB9DQogICAgICAvL+aIkOWKn+W8ueWHug0KICAgICAgdGhpcy4kbWVzc2FnZS5zdWNjZXNzKCLliKDpmaTnlKjmiLfmiJDlip8iKTsNCiAgICAgIC8v6YeN5paw6I635Y+W55So5oi35YiX6KGoDQogICAgICB0aGlzLmdldFVzZXJsaXN0KCk7DQogICAgfSwNCiAgICAvLyDlsZXnpLrliIbphY3op5LoibLlr7nor53moYYNCiAgICBhc3luYyBzZXRSb2xlKHVzZXJJbmZvKSB7DQogICAgICBjb25zb2xlLmxvZyh1c2VySW5mbyk7DQogICAgICB0aGlzLnVzZXJJbmZvID0gdXNlckluZm87DQogICAgICAvL+WxleekuuWvueivneahhuiOt+WPluaJgOacieadg+mZkOWIl+ihqA0KICAgICAgY29uc3QgeyBkYXRhOiByZXMgfSA9IGF3YWl0IHRoaXMuJGh0dHAuZ2V0KCJyb2xlcyIpOw0KICAgICAgLy/mj5DnpLrlpLHotKUNCiAgICAgIGlmIChyZXMubWV0YS5zdGF0dXMgIT09IDIwMCkgew0KICAgICAgICByZXR1cm4gdGhpcy4kbWVzc2FnZS5lcnJvcigi6I635Y+W5YiX6KGo5aSx6LSlIik7DQogICAgICB9DQogICAgICB0aGlzLnJvbGVsaXN0ID0gcmVzLmRhdGE7DQogICAgICAvLyBjb25zb2xlLmxvZyh0aGlzLnJvbGVsaXN0KTsNCiAgICAgIC8vIOaYvuekuuWvueivneahhg0KICAgICAgdGhpcy5zZXRSb2xlRGlhbG9nVmlzaWJsZSA9IHRydWU7DQogICAgfSwNCiAgICAvL+eCueWHu+aMiemSruWIhumFjeinkuiJsg0KICAgIGFzeW5jIHNldFJvbGVJbmZvKCl7DQogICAgICAvL+WIpOaWreeUqOaIt+aYr+WQpumAieaLqeaWsOeahOinkuiJsg0KICAgICAgY29uc29sZS5sb2codGhpcy5zZWxlY3RlZFJvbGVJZCk7DQogICAgICBpZighdGhpcy5zZWxlY3RlZFJvbGVJZCl7DQogICAgICAgIHJldHVybiB0aGlzLiRtZXNzYWdlLmVycm9yKCfor7fpgInmi6nopoHliIbphY3nmoTop5LoibInKQ0KICAgICAgfQ0KICAgICAgIGNvbnN0IHsgZGF0YTogcmVzIH0gPSBhd2FpdCB0aGlzLiRodHRwLnB1dChgdXNlcnMvJHt0aGlzLnVzZXJJbmZvLmlkfS9yb2xlYCx7cmlkOnRoaXMuc2VsZWN0ZWRSb2xlSWR9KTsNCiAgICAgIC8vICBjb25zb2xlLmxvZyhyZXMpOw0KICAgICAgIC8v5o+Q56S65aSx6LSlDQogICAgICBpZiAocmVzLm1ldGEuc3RhdHVzICE9PSAyMDApIHsNCiAgICAgICAgcmV0dXJuIHRoaXMuJG1lc3NhZ2UuZXJyb3IoIuabtOaWsOinkuiJsuWksei0pSIpOw0KICAgICAgfQ0KICAgICAgdGhpcy4kbWVzc2FnZS5zdWNjZXNzKCfmm7TmlrDop5LoibLmiJDlip8nKQ0KICAgICAgIC8v6YeN5paw6I635Y+W55So5oi35YiX6KGoDQogICAgICB0aGlzLmdldFVzZXJsaXN0KCk7DQogICAgICB0aGlzLnNldFJvbGVEaWFsb2dWaXNpYmxlID0gZmFsc2UNCiAgICB9LA0KICAgIC8vIOebkeWQrOWIhumFjeinkuiJsuWvueivneahhueahOWFs+mXreS6i+S7tiDlvZPku5blhbPpl63mlbDmja7lhajpg6jmuIXpm7YNCiAgICBzZXRSb2xlRGlhbG9nQ2xvc2VkKCl7DQogICAgICB0aGlzLnNlbGVjdGVkUm9sZUlkPScnDQogICAgICB0aGlzLnVzZXJJbmZvPScnDQogICAgfQ0KICB9LA0KfTsNCg=="},{"version":3,"sources":["Users.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA4MA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Users.vue","sourceRoot":"src/components/user","sourcesContent":["<template>\r\n  <div>\r\n    <el-breadcrumb separator-class=\"el-icon-arrow-right\">\r\n      <el-breadcrumb-item :to=\"{ path: '/home' }\">首页</el-breadcrumb-item>\r\n      <el-breadcrumb-item>用户管理</el-breadcrumb-item>\r\n      <el-breadcrumb-item>用户列表</el-breadcrumb-item>\r\n    </el-breadcrumb>\r\n    <el-card>\r\n      <!-- 搜索 -->\r\n      <el-row :gutter=\"20\">\r\n        <el-col :span=\"8\">\r\n          <!-- v-model=\"queryInfo.query\" 获取用户输入的值  \r\n           clearable清空 @clear=\"getUserlist\"点击清空后重新获取-->\r\n          <el-input\r\n            placeholder=\"请输入内容\"\r\n            v-model=\"queryInfo.query\"\r\n            clearable\r\n            @clear=\"getUserlist\"\r\n          >\r\n            <el-button\r\n              slot=\"append\"\r\n              icon=\"el-icon-search\"\r\n              @click=\"getUserlist\"\r\n            ></el-button>\r\n          </el-input>\r\n        </el-col>\r\n        <el-col :span=\"4\">\r\n          <el-button type=\"primary\" @click=\"addDialogVisible = true\"\r\n            >添加用户</el-button\r\n          >\r\n        </el-col>\r\n      </el-row>\r\n      <!-- 表格 -->\r\n      <el-table :data=\"userlist\" border stripe>\r\n        <el-table-column type=\"index\" label=\"id\"></el-table-column>\r\n        <el-table-column prop=\"username\" label=\"姓名\"></el-table-column>\r\n        <el-table-column prop=\"email\" label=\"邮箱\"></el-table-column>\r\n        <el-table-column prop=\"mobile\" label=\"手机号\"> </el-table-column>\r\n        <el-table-column prop=\"create_time\" label=\"创建时间\"> </el-table-column>\r\n        <el-table-column prop=\"role_name\" label=\"权限\"> </el-table-column>\r\n        <el-table-column label=\"状态\">\r\n          <!-- slot-scope=\"scope\" 来取得作用域插槽:data绑定的数据，scope可以随便替换其他名称，\r\n         只是定义对象来代表取得的data数据，便于使用 -->\r\n          <!-- scope.row 获取当前行所有数据-->\r\n          <!-- template模板插糟 -->\r\n          <template slot-scope=\"scope\">\r\n            <el-switch\r\n              v-model=\"scope.row.mg_state\"\r\n              @change=\"userStateChanged(scope.row)\"\r\n            >\r\n            </el-switch>\r\n          </template>\r\n        </el-table-column>\r\n        <el-table-column label=\"操作\" width=\"180px\" class=\"caozuo\">\r\n          <template slot-scope=\"scope\">\r\n            <!-- 修改按钮 -->\r\n            <el-button\r\n              type=\"primary\"\r\n              icon=\"el-icon-edit\"\r\n              size=\"mini\"\r\n              @click=\"showEditDialog(scope.row.id)\"\r\n            ></el-button>\r\n            <!-- 删除按钮 -->\r\n            <el-button\r\n              type=\"danger\"\r\n              icon=\"el-icon-delete\"\r\n              size=\"mini\"\r\n              @click=\"removeUserById(scope.row.id)\"\r\n            ></el-button>\r\n            <!-- 分配角色 -->\r\n            <el-tooltip\r\n              class=\"item\"\r\n              effect=\"dark\"\r\n              content=\"分配权限\"\r\n              placement=\"top\"\r\n              :enterable=\"false\"\r\n            >\r\n              <el-button\r\n                type=\"warning\"\r\n                icon=\"el-icon-setting\"\r\n                size=\"mini\"\r\n                @click=\"setRole(scope.row)\"\r\n              ></el-button>\r\n            </el-tooltip>\r\n          </template>\r\n        </el-table-column>\r\n      </el-table>\r\n      <!-- 分页 -->\r\n      <el-pagination\r\n        @size-change=\"handleSizeChange\"\r\n        @current-change=\"handleCurrentChange\"\r\n        :current-page=\"queryInfo.pagenum\"\r\n        :page-sizes=\"[1, 2, 5, 10]\"\r\n        :page-size=\"queryInfo.pagesize\"\r\n        layout=\"total, sizes, prev, pager, next, jumper\"\r\n        :total=\"total\"\r\n      >\r\n      </el-pagination>\r\n    </el-card>\r\n    <!-- 添加用户的对话框 -->\r\n    <!-- :visible.sync=\"addDialogVisible\"控制对话框显示隐藏 -->\r\n    <el-dialog\r\n      title=\"添加用户\"\r\n      :visible.sync=\"addDialogVisible\"\r\n      width=\"50%\"\r\n      @close=\"addDialogClosed\"\r\n    >\r\n      <!-- 内容主体区 -->\r\n      <!-- :model=\"addForm\" 表单数据\r\n       :rules=\"addFormRules\"验证规则\r\n       -->\r\n      <el-form\r\n        :model=\"addForm\"\r\n        :rules=\"addFormRules\"\r\n        ref=\"addFormRef\"\r\n        label-width=\"70px\"\r\n      >\r\n        <el-form-item label=\"用户名\" prop=\"username\">\r\n          <el-input v-model=\"addForm.username\"></el-input>\r\n        </el-form-item>\r\n        <el-form-item label=\"密码\" prop=\"password\">\r\n          <el-input\r\n            type=\"password\"\r\n            v-model=\"addForm.password\"\r\n            clearable\r\n          ></el-input>\r\n        </el-form-item>\r\n        <el-form-item label=\"邮箱\" prop=\"email\">\r\n          <el-input v-model=\"addForm.email\" clearable></el-input>\r\n        </el-form-item>\r\n        <el-form-item label=\"手机号\" prop=\"mobile\">\r\n          <el-input v-model=\"addForm.mobile\" clearable></el-input>\r\n        </el-form-item>\r\n      </el-form>\r\n      <span slot=\"footer\" class=\"dialog-footer\">\r\n        <el-button @click=\"addDialogVisible = false\">取 消</el-button>\r\n        <el-button type=\"primary\" @click=\"addUser\"> 确 定</el-button>\r\n      </span>\r\n    </el-dialog>\r\n    <!-- 修改用户的对话框 -->\r\n    <el-dialog\r\n      title=\"修改用户\"\r\n      :visible.sync=\"editDialogVisible\"\r\n      width=\"50%\"\r\n      @close=\"editDialogClosed\"\r\n    >\r\n      <!-- 内容主体区 -->\r\n      <!-- :model=\"addForm\" 表单数据\r\n       :rules=\"addFormRules\"验证规则\r\n       -->\r\n      <el-form\r\n        :model=\"editForm\"\r\n        :rules=\"editFormRules\"\r\n        ref=\"editFormRef\"\r\n        label-width=\"70px\"\r\n      >\r\n        <el-form-item label=\"用户名\">\r\n          <el-input v-model=\"editForm.username\" disabled></el-input>\r\n        </el-form-item>\r\n        <el-form-item label=\"邮箱\" prop=\"email\">\r\n          <el-input v-model=\"editForm.email\" clearable></el-input>\r\n        </el-form-item>\r\n        <el-form-item label=\"手机号\" prop=\"mobile\">\r\n          <el-input v-model=\"editForm.mobile\" clearable></el-input>\r\n        </el-form-item>\r\n      </el-form>\r\n      <span slot=\"footer\" class=\"dialog-footer\">\r\n        <el-button @click=\"editDialogVisible = false\">取 消</el-button>\r\n        <el-button type=\"primary\" @click=\"editUser\"> 确 定</el-button>\r\n      </span>\r\n    </el-dialog>\r\n    <!-- 分配用户的角色对话框 -->\r\n    <el-dialog\r\n      title=\"分配角色\"\r\n      :visible.sync=\"setRoleDialogVisible\"\r\n      @close=\"setRoleDialogClosed\"\r\n      width=\"50%\"\r\n    >\r\n      <div>\r\n        <p>当前用户:{{ userInfo.username }}</p>\r\n        <p>当前角色:{{ userInfo.role_name }}</p>\r\n        <p> 选择新角色\r\n          <el-select v-model=\"selectedRoleId\" placeholder=\"请选择\">\r\n            <el-option\r\n              v-for=\"item in rolelist\"\r\n              :key=\"item.id\"\r\n              :label=\"item.roleName\"\r\n              :value=\"item.id\"\r\n            >\r\n            </el-option>\r\n          </el-select>\r\n        </p>\r\n      </div>\r\n      <span slot=\"footer\" class=\"dialog-footer\">\r\n        <el-button @click=\"setRoleDialogVisible = false\">取 消</el-button>\r\n        <el-button type=\"primary\" @click=\"setRoleInfo\"\r\n          >确 定</el-button\r\n        >\r\n      </span>\r\n    </el-dialog>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  data() {\r\n    // 校验邮箱的规则\r\n    var checkEmail = (rule, value, cb) => {\r\n      // 验证邮箱的正则表达式\r\n      const regEmail = /^([a-zA-Z0-9_-])+@([a-zA-Z0-9_-])+(\\.[a-zA-Z0-9_-])+/;\r\n      // 如果验证邮箱正确，返回回调函数，输入框显示绿色\r\n      if (regEmail.test(value)) {\r\n        // 合法的邮箱\r\n        return cb();\r\n      }\r\n      // 如果验证不正确\r\n      cb(new Error(\"请输入合法的邮箱\"));\r\n    };\r\n    // 校验手机号的规则\r\n    var checkMobile = (rule, value, cb) => {\r\n      // 验证手机号的正则表达式\r\n      const regMobile =\r\n        /^(((13[0-9]{1})|(14[0-9]{1})|(15[0-9]{1})|(16[0-9]{1})|(17[0-9]{1})|(19[0-9]{1})|(18[0-9]{1}))+\\d{8})$/;\r\n      // 如果验证手机号正确，返回回调函数，输入框显示绿色\r\n      if (regMobile.test(value)) {\r\n        return cb();\r\n      }\r\n      // 如果验证不正确\r\n      cb(new Error(\"请输入合法的手机号\"));\r\n    };\r\n    return {\r\n      //获取用户列表的参数\r\n      queryInfo: {\r\n        query: \"\",\r\n        //当前页数\r\n        pagenum: 1,\r\n        //每页显示多少条\r\n        pagesize: 2,\r\n        //搜索输入框里面的值\r\n      },\r\n      //保存用户列表\r\n      userlist: [],\r\n      //保存总数据条数\r\n      total: 0,\r\n      //控制添加用户对话框显示隐藏\r\n      addDialogVisible: false,\r\n      //控制修改用户对话框显示隐藏\r\n      editDialogVisible: false,\r\n      // 分配用户的角色对话框显示隐藏\r\n      setRoleDialogVisible: false,\r\n      //添加用户表单数据\r\n      addForm: {\r\n        username: \"\",\r\n        password: \"\",\r\n        email: \"\",\r\n        mobile: \"\",\r\n      },\r\n      //查询用户表单信息对象\r\n      editForm: {\r\n        // username:'',\r\n        // password:'',\r\n        // email:'',\r\n        // mobile:'',\r\n      },\r\n      //修改表单的验证规则对象\r\n      editFormRules: {\r\n        username: [\r\n          //trigger: \"blur\"失去焦点\r\n          { required: true, message: \"请输入用户名\", trigger: \"blur\" },\r\n          {\r\n            min: 3,\r\n            max: 10,\r\n            message: \"用户名的长度在3~10个字符之间\",\r\n            trigger: \"blur\",\r\n          },\r\n        ],\r\n        //验证密码是否合法\r\n        password: [\r\n          { required: true, message: \"请输入密码\", trigger: \"blur\" },\r\n          {\r\n            min: 6,\r\n            max: 15,\r\n            message: \"长度在 6 到 15 个字符\",\r\n            trigger: \"blur\",\r\n          },\r\n        ],\r\n        email: [\r\n          { required: true, message: \"请输入邮箱\", trigger: \"blur\" },\r\n          { validator: checkEmail, trigger: \"blur\" },\r\n        ],\r\n        mobile: [\r\n          { required: true, message: \"请输入手机号\", trigger: \"blur\" },\r\n          { validator: checkMobile },\r\n        ],\r\n      },\r\n      //添加用户表单验证规则\r\n      addFormRules: {\r\n        username: [\r\n          //trigger: \"blur\"失去焦点\r\n          { required: true, message: \"请输入用户名\", trigger: \"blur\" },\r\n          {\r\n            min: 3,\r\n            max: 10,\r\n            message: \"用户名的长度在3~10个字符之间\",\r\n            trigger: \"blur\",\r\n          },\r\n        ],\r\n        //验证密码是否合法\r\n        password: [\r\n          { required: true, message: \"请输入密码\", trigger: \"blur\" },\r\n          {\r\n            min: 6,\r\n            max: 15,\r\n            message: \"长度在 6 到 15 个字符\",\r\n            trigger: \"blur\",\r\n          },\r\n        ],\r\n        email: [\r\n          { required: true, message: \"请输入邮箱\", trigger: \"blur\" },\r\n          { validator: checkEmail, trigger: \"blur\" },\r\n        ],\r\n        mobile: [\r\n          { required: true, message: \"请输入手机号\", trigger: \"blur\" },\r\n          { validator: checkMobile },\r\n        ],\r\n      },\r\n      //需要分配角色的用户信息\r\n      userInfo: {},\r\n      //所有角色以后列表\r\n      rolelist: [],\r\n      //用户角色选择的新角色id的值\r\n      selectedRoleId:''\r\n    };\r\n  },\r\n  created() {\r\n    this.getUserlist();\r\n  },\r\n  methods: {\r\n    // 获取用户列表\r\n    async getUserlist() {\r\n      //users接口 this.queryInfo参数 params别名\r\n      const { data: res } = await this.$http.get(\"users\", {\r\n        params: this.queryInfo,\r\n      });\r\n      if (res.meta.status !== 200) {\r\n        return this.$message.error(\"获取用户列表失败\");\r\n      }\r\n      //保存用户列表\r\n      this.userlist = res.data.users;\r\n      //保存总数据条数\r\n      this.total = res.data.total;\r\n      console.log(this.total);\r\n    },\r\n    //监听pagesize改变的事件\r\n    handleSizeChange(newSize) {\r\n      // console.log(11111,newSize);\r\n      this.queryInfo.pagesize = newSize;\r\n      this.getUserlist();\r\n    },\r\n    //监听页码值改变的事件\r\n    handleCurrentChange(newPage) {\r\n      //  console.log(newPage);\r\n      this.queryInfo.pagenum = newPage;\r\n      this.getUserlist();\r\n    },\r\n    //监听switch开关状态的改变\r\n    async userStateChanged(userinfo) {\r\n      console.log(userinfo);\r\n      const { data: res } = await this.$http.put(\r\n        `users/${userinfo.id}/state/${userinfo.mg_state}`\r\n      );\r\n      //判断状态码响应成功没有\r\n      if (res.meta.status !== 200) {\r\n        //把状态变成原样,并提示更新用户状态失败\r\n        userinfo.mg_state = !userinfo.mg_state;\r\n        return this.$message.error(\"更新用户状态失败\");\r\n      }\r\n      //提示成功\r\n      this.$message.success(\"更新用户状态成功\");\r\n    },\r\n    //添加用户对话框关闭事件\r\n    addDialogClosed() {\r\n      //resetFields对整个表单进行重置，将所有字段值重置为初始值并移除校验结果\r\n      this.$refs.addFormRef.resetFields();\r\n    },\r\n    // 点击按钮添加新用户\r\n    addUser() {\r\n      this.$refs.addFormRef.validate(async (valid) => {\r\n        if (!valid) return;\r\n        const { data: res } = await this.$http.post(\"users\", this.addForm);\r\n        if (res.data.status !== 201) {\r\n          this.$message.error(\"添加用户失败\");\r\n        }\r\n        this.$message.success(\"添加用户成功\");\r\n        //对话框隐藏\r\n        this.addDialogVisible = false;\r\n        //重新获取用户列表\r\n        this.getUserlist();\r\n        //所有角色的数据列表\r\n      });\r\n    },\r\n    // 展示编辑用户的对话框\r\n    async showEditDialog(id) {\r\n      this.editDialogVisible = true;\r\n      // 根据 ID 查询用户信息\r\n      const { data: res } = await this.$http.get(\"users/\" + id);\r\n      //用if进行判断 用户请求成功还是失败\r\n      if (res.meta.status != 200) {\r\n        //失败提示\r\n        return this.$message.error(\"查询用户失败\");\r\n      }\r\n      this.editForm = res.data;\r\n    },\r\n    //修改用户对话框的关闭事件\r\n    editDialogClosed() {\r\n      // resetFields\t对整个表单进行重置，将所有字段值重置为初始值并移除校验结果\r\n      this.$refs.editFormRef.resetFields();\r\n    },\r\n    //修改用户信息并且提交\r\n    editUser() {\r\n      this.$refs.editFormRef.validate(async (valid) => {\r\n        //打印为true,表示格式校验验证通过\r\n        console.log(this.editForm);\r\n        //不通过直接结束\r\n        if (!valid) return;\r\n        //通过发起修改用户信息的请求\r\n        const { data: res } = await this.$http.put(\r\n          \"users/\" + this.editForm.id,\r\n          {\r\n            email: this.editForm.email,\r\n            mobile: this.editForm.mobile,\r\n          }\r\n        );\r\n        //先判断响应成功没有\r\n        if (res.meta.status !== 200) {\r\n          return this.$message.error(\"更新用户信息失败\");\r\n        }\r\n        //响应成功之后\r\n        //关闭对话框 刷新数据表 提示修改成功\r\n        this.editDialogVisible = false;\r\n        this.getUserlist();\r\n        this.$message.success(\"更新用户信息成功\");\r\n      });\r\n    },\r\n    //根据id删除对应的用户信息\r\n    async removeUserById(id) {\r\n      console.log(id);\r\n      //弹框提示\r\n      const confirmResult = await this.$confirm(\r\n        \"此操作将永久删除该用户, 是否继续?\",\r\n        \"提示\",\r\n        {\r\n          confirmButtonText: \"确定\",\r\n          cancelButtonText: \"取消\",\r\n          type: \"warning\",\r\n        }\r\n      ).catch((err) => err);\r\n      //如果确认删除 返回confirm\r\n      //取消删除 返回cancel\r\n      console.log(confirmResult);\r\n      if (confirmResult !== \"confirm\") {\r\n        return this.$message.info(\"已经取消删除\");\r\n      }\r\n      const { data: res } = await this.$http.delete(\"users/\" + id);\r\n      if (res.meta.status != 200) {\r\n        //响应错误提示\r\n        return this.$message.error(\"删除用户失败\");\r\n      }\r\n      //成功弹出\r\n      this.$message.success(\"删除用户成功\");\r\n      //重新获取用户列表\r\n      this.getUserlist();\r\n    },\r\n    // 展示分配角色对话框\r\n    async setRole(userInfo) {\r\n      console.log(userInfo);\r\n      this.userInfo = userInfo;\r\n      //展示对话框获取所有权限列表\r\n      const { data: res } = await this.$http.get(\"roles\");\r\n      //提示失败\r\n      if (res.meta.status !== 200) {\r\n        return this.$message.error(\"获取列表失败\");\r\n      }\r\n      this.rolelist = res.data;\r\n      // console.log(this.rolelist);\r\n      // 显示对话框\r\n      this.setRoleDialogVisible = true;\r\n    },\r\n    //点击按钮分配角色\r\n    async setRoleInfo(){\r\n      //判断用户是否选择新的角色\r\n      console.log(this.selectedRoleId);\r\n      if(!this.selectedRoleId){\r\n        return this.$message.error('请选择要分配的角色')\r\n      }\r\n       const { data: res } = await this.$http.put(`users/${this.userInfo.id}/role`,{rid:this.selectedRoleId});\r\n      //  console.log(res);\r\n       //提示失败\r\n      if (res.meta.status !== 200) {\r\n        return this.$message.error(\"更新角色失败\");\r\n      }\r\n      this.$message.success('更新角色成功')\r\n       //重新获取用户列表\r\n      this.getUserlist();\r\n      this.setRoleDialogVisible = false\r\n    },\r\n    // 监听分配角色对话框的关闭事件 当他关闭数据全部清零\r\n    setRoleDialogClosed(){\r\n      this.selectedRoleId=''\r\n      this.userInfo=''\r\n    }\r\n  },\r\n};\r\n</script>\r\n\r\n<style scoped >\r\n</style>"]}]}